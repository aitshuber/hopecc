
<div><hr class="uk-margin-remove"></div>
<div class="uk-container">
    <div data-uk-navbar>
        <div class="uk-navbar-left">
            {% if site.navbar_primary.search %}
            <div>
                <a class="uk-navbar-toggle" data-uk-search-icon="ratio: 0.9" href="#" id="search-toggler"></a>

            </div>

            {% endif %}

            <ul class="uk-navbar-nav uk-visible@m">
                {% for link in site.data.navbar_primary.left %}
                    {% if link.url contains 'http' %}
                        {% assign domain = '' %}
                    {% else %}
                        {% assign domain = '' | relative_url %}
                    {% endif %}
                    {% if link.url == page.url %}
                        {% assign current = ' class="uk-active"' %}
                    {% else %}
                        {% assign current = null %}
                    {% endif %}
                    {% if link.title %}
                        <li{{ current }}>
                            {% if link.url %}
                            <a href="{{ domain }}{{ link.url }}" {% if link.url contains 'http' %}target="_blank" {% endif %}>{{ link.title }}</a>
                            {% else %}
                            <a href="#">{{ link.title }}</a>
                            {% endif %}
                            {% if link.dropdown != null %}
                            <div class="uk-navbar-dropdown">
                                <ul class="uk-nav uk-navbar-dropdown-nav">
                                    {% for child in link.dropdown %}
                                    {% if child.url != null %}
                                        {% if child.url contains 'http' %}
                                            {% assign domain = '' %}
                                        {% else %}
                                            {% assign domain = '' | relative_url %}
                                        {% endif %}
                                        {% if child.url == page.url %}
                                            {% assign current = ' class="uk-active"' %}
                                        {% else %}
                                            {% assign current = null %}
                                        {% endif %}
                                        <li{{ current }}><a href="{{ domain }}{{ child.url }}">{{ child.title }}</a></li>
                                    {% else %}
                                        <li class="uk-nav-header">{{ child.title }}</li>
                                    {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>

        <div class="uk-drop uk-background-default uk-search-background" data-uk-drop="mode: click; pos: right-center; offset: 0" id="search-box-holder">
            <form class="uk-search uk-search-navbar uk-width-1-1" action="/search" method="get">
                <input id="search-box" class="uk-search-input" type="text" placeholder="Search..." autofocus name="query">
            </form>
        </div>
        <div class="uk-navbar-center" id="center-navbar">
            <ul class="uk-navbar-nav uk-visible@m">
                {% for link in site.data.navbar_primary.center %}
                    {% if link.url contains 'http' %}
                        {% assign domain = '' %}
                    {% else %}
                        {% assign domain = '' | relative_url %}
                    {% endif %}
                    {% if link.url == page.url %}
                        {% assign current = ' class="uk-active"' %}
                    {% else %}
                        {% assign current = null %}
                    {% endif %}
                    {% if link.title %}
                        <li{{ current }}>
                          {% if link.url %}
                            <a href="{{ domain }}{{ link.url }}" {% if link.url contains 'http' %}target="_blank" {% endif %}>{{ link.title }}</a>
                          {% else %}
                            <a href="#">{{ link.title }}</a>
                          {% endif %}
                          {% if link.dropdown != null %}
                            <div class="uk-navbar-dropdown">
                                <ul class="uk-nav uk-navbar-dropdown-nav">
                                  {% for child in link.dropdown %}
                                    {% if child.url != null %}
                                      {% if child.url contains 'http' %}
                                          {% assign domain = '' %}
                                      {% else %}
                                          {% assign domain = '' | relative_url %}
                                      {% endif %}
                                      {% if child.url == page.url %}
                                          {% assign current = ' class="uk-active"' %}
                                      {% else %}
                                          {% assign current = null %}
                                      {% endif %}
                                      <li{{ current }}><a href="{{ domain }}{{ child.url }}">{{ child.title }}</a></li>
                                    {% else %}
                                      <li class="uk-nav-header">{{ child.title }}</li>
                                    {% endif %}
                                  {% endfor %}
                                </ul>
                            </div>
                          {% endif %}
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>

<!--        <div class="uk-navbar-center">-->
<!--            <div class="uk-drop uk-background-default" data-uk-drop="mode: click; pos: right-center; offset: 0" id="search-box-holder">-->
<!--                <form class="uk-search uk-search-navbar uk-width-1-1" action="/search" method="get">-->
<!--                    <input id="search-box" class="uk-search-input" type="text" placeholder="Search..." autofocus name="query">-->
<!--                </form>-->
<!--            </div>-->

<!--        </div>-->



        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav uk-visible@m">
                {% for link in site.data.navbar_primary.right %}
                    {% if link.url contains 'http' %}
                        {% assign domain = '' %}
                    {% else %}
                        {% assign domain = '' | relative_url %}
                    {% endif %}
                    {% if link.url == page.url %}
                        {% assign current = ' class="uk-active"' %}
                    {% else %}
                        {% assign current = null %}
                    {% endif %}
                    {% if link.title %}
                        <li{{ current }}>
                          {% if link.url %}
                            <a href="{{ domain }}{{ link.url }}" {% if link.url contains 'http' %}target="_blank" {% endif %}>{{ link.title }}</a>
                          {% else %}
                            <a href="#">{{ link.title }}</a>
                          {% endif %}
                          {% if link.dropdown != null %}
                            <div class="uk-navbar-dropdown">
                                <ul class="uk-nav uk-navbar-dropdown-nav">
                                  {% for child in link.dropdown %}
                                    {% if child.url != null %}
                                      {% if child.url contains 'http' %}
                                          {% assign domain = '' %}
                                      {% else %}
                                          {% assign domain = '' | relative_url %}
                                      {% endif %}
                                      {% if child.url == page.url %}
                                          {% assign current = ' class="uk-active"' %}
                                      {% else %}
                                          {% assign current = null %}
                                      {% endif %}
                                      <li{{ current }}><a href="{{ domain }}{{ child.url }}">{{ child.title }}</a></li>
                                    {% else %}
                                      <li class="uk-nav-header">{{ child.title }}</li>
                                    {% endif %}
                                  {% endfor %}
                                </ul>
                            </div>
                          {% endif %}
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>

            <div data-uk-grid class="uk-child-width-auto uk-grid-small uk-flex-right@m uk-visible@m social uk-margin-left">
              {% include social-networks.html icon_ratio="0.8" %}
            </div>

            {% if site.donations.paypal.navbar %}
              <div class="uk-navbar-item">
                  {% include donations-paypal.html %}
              </div>
            {% endif %}

            <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas" data-uk-navbar-toggle-icon data-uk-toggle></a>

        </div>

    </div>
    
</div>

<div class="uk-margin-remove"><hr></div>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const searchBoxHolder = document.getElementById('search-box-holder');
    const searchBox = document.getElementById('search-box');
    const centerNavbar = document.getElementById('center-navbar');

    const onShow = () => {
      // Hide the center menu when the drop opens
      centerNavbar && centerNavbar.classList.add('uk-hidden');

      // Optional: set width for your search drop
      if (searchBoxHolder) {
        searchBoxHolder.classList.add('nav-search-bar')
      }

      // Focus the input after it becomes visible
      setTimeout(() => searchBox && searchBox.focus(), 0);
    };

    const onHide = () => {
      // Show the center menu back when the drop closes (click outside, ESC, etc.)
      centerNavbar && centerNavbar.classList.remove('uk-hidden');

      // Reset inline width so layout returns to normal
      if (searchBoxHolder) {
        searchBoxHolder.classList.remove('nav-search-bar');
      }
    };

    // Bind to UIkit's component events (compatible with older UIkit 3)
    if (searchBoxHolder) {
      if (window.UIkit && UIkit.util && typeof UIkit.util.on === 'function') {
        UIkit.util.on(searchBoxHolder, 'show', onShow);
        UIkit.util.on(searchBoxHolder, 'hide', onHide);
      } else {
        // Fallback in case UIkit.util.on is not available
        searchBoxHolder.addEventListener('show', onShow);
        searchBoxHolder.addEventListener('hide', onHide);
      }
    }
  });
</script>



{% comment %}

<script>

    document.addEventListener("DOMContentLoaded", function () {
        const searchToggler = document.getElementById('search-toggler');
        const searchBoxHolder = document.getElementById('search-box-holder');
        const searchBox = document.getElementById('search-box');
        const centerNavbar = document.getElementById('center-navbar');

        function getWidth(element){
            return elementWidth = element.getBoundingClientRect().width;
        }

        searchToggler.addEventListener('click', function () {
            var centerNavbarWidth = getWidth(centerNavbar);
            centerNavbar.classList.toggle('uk-hidden');
            searchBoxHolder.style.width = 62 + 'em';
            searchBox.focus();
        });

    });


</script>

{% endcomment %}